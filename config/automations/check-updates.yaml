alias: Check Home Assistant Version once a day
trigger:
  platform: time
  at: '08:00:00'
condition:
  condition: template
  value_template: >
    {{ states('sensor.latest_version') > states('sensor.current_version') }}
action:
  - service: notify.slack
    data:
      title: Update available
      message: >
        New version available: {{ states('sensor.latest_version') }}
      data:
        blocks:
          - type: section
            text:
              type: mrkdwn
              text: >
                :tada: New version available: <https://github.com/home-assistant/core/releases/tag/{{ states('sensor.latest_version') }}|{{ states('sensor.latest_version') }}> | <https://www.home-assistant.io/blog/categories/release-notes/|Releases>
  - service: persistent_notification.create
    data_template:
      title: Update available
      notification_id: "Update available"
      message: >
        New version available: [{{ states('sensor.latest_version') }}](https://github.com/home-assistant/core/releases/tag/{{ states('sensor.latest_version') }}) | [Releases](https://www.home-assistant.io/blog/categories/release-notes/)
